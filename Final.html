<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final - Món Súper 3</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="no-margins final-page">
    <header class="top-nav" role="banner">
        <div class="nav-container">
            <div class="nav-logo" aria-hidden="true">El mon dels <strong>Super 3</strong></div>
            <nav class="nav-links" role="navigation" aria-label="Menú principal">
                <ul>
                    <li><a href="index.html" class="nav-link">El mon dels super 3</a></li>
                    <li><a href="#" class="nav-link">Informació</a></li>
                    <li><a href="#" class="nav-link">Contacta'ns</a></li>
                    <li><a href="#" class="btn-primary">Començar</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="final-hero" id="finalHero">
        <div class="final-inner">
            <img src="img/1-planeta.png" alt="Planeta 1" class="planet final-planet">

            <!-- light that appears under the ship -->
            <div class="nau-light" id="nauLight" aria-hidden="true"></div>

            <!-- ship that will fly in after 8s -->
            <img src="img/1-nau.png" alt="Nau espacial" id="finalNau" class="final-nau" aria-hidden="true">

            <button class="btn-final" id="finalBtn">calculant...</button>
        </div>
    </main>

    <script>
        // insert year if there is a placeholder
        var anyEl = document.getElementById('any-final');
        if (anyEl) anyEl.textContent = new Date().getFullYear();

        // after 8 seconds show the ship flying from right to center + light (with image fallback)
        window.addEventListener('load', function () {
            setTimeout(function () {
                var nau = document.getElementById('finalNau');
                var lightDiv = document.getElementById('nauLight');
                var hero = document.getElementById('finalHero');

                // show and animate the ship
                if (nau) {
                    nau.classList.add('visible');
                    nau.setAttribute('aria-hidden','false');
                }

                // try to load a real light image (img/llum.png). If it exists, inject it and show it.
                var lightImg = new Image();
                lightImg.src = 'img/llum.png';
                lightImg.onload = function () {
                    lightImg.id = 'nauLightImg';
                    lightImg.className = 'nau-light-img';
                    lightImg.alt = 'llum de la nau';
                    // insert it into the same container as the ship so z-index works
                    if (nau && nau.parentNode) {
                        nau.parentNode.insertBefore(lightImg, nau.nextSibling);
                    } else if (hero) {
                        hero.appendChild(lightImg);
                    }
                    // small timeout to allow layout then reveal (sync with ship)
                    setTimeout(function () {
                        lightImg.classList.add('visible');
                        lightImg.setAttribute('aria-hidden','false');
                    }, 80);
                };
                lightImg.onerror = function () {
                    // fallback to the existing blurred radial glow div
                    if (lightDiv) {
                        lightDiv.classList.add('visible');
                        lightDiv.setAttribute('aria-hidden','false');
                    }
                };

                // slightly zoom out the background when ship appears
                if (hero) hero.style.backgroundSize = '110%';
            }, 8000);
        });
    </script>
</body>
</html>
